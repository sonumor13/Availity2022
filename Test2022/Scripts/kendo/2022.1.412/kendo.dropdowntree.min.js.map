{"version":3,"file":"kendo.dropdowntree.min.js","sources":["kendo.dropdowntree.js"],"sourcesContent":["(function(f, define){\n    define('dropdowntree/treeview',[ \"../kendo.treeview\" ], f);\n})(function(){\n\n(function($, undefined) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        DISABLED = \"k-disabled\",\n        SELECT = \"select\",\n        CHECKED = \"checked\",\n        DATABOUND = \"dataBound\",\n        CLICK = \"click\",\n        NS = \".kendoTreeView\",\n        INDETERMINATE = \"indeterminate\",\n        NAVIGATE = \"navigate\",\n        subGroup,\n        TreeView = ui.TreeView;\n\n        function contentChild(filter) {\n            return function(node) {\n                var result = node.children(\".k-animation-container\");\n\n                if (!result.length) {\n                    result = node;\n                }\n\n                return result.children(filter);\n            };\n        }\n\n        subGroup = contentChild(\".k-group\");\n\n    var Tree = TreeView.extend({\n        init: function(element, options, dropdowntree) {\n            var that = this;\n\n            that.dropdowntree = dropdowntree;\n            that._nodesToLoad = 0;\n\n            TreeView.fn.init.call(that, element, options);\n            if(that.dropdowntree._isMultipleSelection()){\n                that.wrapper.on(CLICK + NS, '.k-in.k-selected', that._clickSelectedItem.bind(that));\n            }\n        },\n\n        _checkOnSelect: function (e) {\n            if (!e.isDefaultPrevented()) {\n                var dataItem = this.dataItem(e.node);\n\n                dataItem.set(\"checked\", !dataItem.checked);\n            }\n        },\n\n        _setCheckedValue: function (node, value){\n            node.set(CHECKED, value);\n        },\n\n        _click: function (e) {\n            var that = this;\n\n            if(that.dropdowntree._isMultipleSelection()){\n                that.one(\"select\", that._checkOnSelect);\n            }\n            TreeView.fn._click.call(that, e);\n        },\n\n        _clickSelectedItem: function (e) {\n            var that = this,\n            node = $(e.currentTarget);\n\n            that.one(\"select\", that._checkOnSelect);\n            if (!that._trigger(SELECT, node)) {\n                that.dataItem(node).set(\"selected\", false);\n            }\n        },\n\n        defaultrefresh: function(e) {\n            var that = this;\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n            var i;\n\n            if (this._skip) {\n                return;\n            }\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateNodes(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n\n            if (checkChildren && action != \"remove\") {\n                var bubble = false;\n\n                for (i = 0; i < items.length; i++) {\n                    if (\"checked\" in items[i]) {\n                        bubble = true;\n                        break;\n                    }\n                }\n\n                if (!bubble && node && node.checked) {\n                    for (i = 0; i < items.length; i++) {\n                        items[i].checked = true;\n                    }\n                }\n            }\n\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this._remove(this.findByUid(items[0].uid), false);\n            } else if (action == \"itemchange\") {\n                this._updateNodes(items);\n            } else if (action == \"itemloaded\") {\n                this._nodesToLoad --;\n                this._refreshChildren(parentNode, items, e.index);\n            } else {\n                this._refreshRoot(items);\n            }\n\n            if (action != \"remove\") {\n                for (i = 0; i < items.length; i++) {\n                    if (!loadOnDemand || items[i].expanded) {\n                        if(items[i].hasChildren){\n                            that._nodesToLoad ++;\n                        }\n                        items[i].load();\n                    }\n                }\n            }\n            if(this._nodesToLoad === 0){\n                this.dropdowntree.trigger(\"allNodesAreLoaded\");\n            }\n            that.wrapper.attr(\"role\", \"tree\");\n            that.wrapper.find(\">ul\").attr(\"role\", \"none\");\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined });\n            this.dropdowntree._treeViewDataBound({ node: node ? parentNode : undefined, sender: this });\n            if (this.options.checkboxes.checkChildren) {\n                this.updateIndeterminate();\n            }\n        },\n\n        _previousVisible: function(node) {\n            var that = this,\n                lastChild,\n                result;\n\n            if (!node.length || node.prev().length) {\n                if (node.length) {\n                    result = node.prev();\n                } else {\n                    result = that.root.children().last();\n                }\n\n                while (that._expanded(result)) {\n                    lastChild = subGroup(result).children().last();\n\n                    if (!lastChild.length) {\n                        break;\n                    }\n\n                    result = lastChild;\n                }\n            } else {\n                result = that.parent(node) || node;\n\n                if(!result.length){\n                    if (that.dropdowntree.checkAll && that.dropdowntree.checkAll.is(\":visible\")) {\n                        that.dropdowntree.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                    } else if(that.dropdowntree.filterInput){\n                        that.dropdowntree.filterInput.trigger(\"focus\");\n                    } else {\n                        that.dropdowntree.wrapper.trigger(\"focus\");\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                target,\n                focused = that.current(),\n                expanded = that._expanded(focused),\n                checkbox = focused.find(\".k-checkbox-wrapper\").first().find(\":checkbox\"),\n                rtl = kendo.support.isRtl(that.element);\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                if (expanded) {\n                    target = that._nextVisible(focused);\n                } else if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.expand(focused);\n                }\n            } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                if (expanded && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.collapse(focused);\n                } else {\n                    target = that.parent(focused);\n\n                    if (!that._enabled(target)) {\n                        target = undefined;\n                    }\n                }\n            } else if (key == keys.DOWN) {\n                target = that._nextVisible(focused);\n            } else if (key == keys.UP && !e.altKey) {\n                target = that._previousVisible(focused);\n            } else if (key == keys.HOME) {\n                target = that._nextVisible($());\n            } else if (key == keys.END) {\n                target = that._previousVisible($());\n            } else if (key == keys.ENTER && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                if (!focused.find(\".k-in\").first().hasClass(\"k-selected\")) {\n                    if (!that._trigger(SELECT, focused)) {\n                        that.select(focused);\n                    }\n                }\n            } else if (key == keys.SPACEBAR && checkbox.length && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                    .data(INDETERMINATE, false)\n                    .prop(INDETERMINATE, false);\n\n                that._checkboxChange({ target: checkbox });\n\n                target = focused;\n            } else if ((e.altKey && key === keys.UP) || key === keys.ESC) {\n                that._closePopup();\n            } else if ( key === keys.TAB) {\n                e.preventDefault();\n                that._closePopup();\n            }\n\n            if (target) {\n                e.preventDefault();\n\n                if (focused[0] != target[0]) {\n                    that._trigger(NAVIGATE, target);\n                    that.current(target);\n                }\n            }\n        },\n\n        _closePopup: function() {\n            this.dropdowntree.close();\n            this.dropdowntree.wrapper.trigger(\"focus\");\n        },\n\n        refresh: function(e){\n            this.defaultrefresh(e);\n\n            if(this.dropdowntree.options.skipUpdateOnBind){\n                return;\n            }\n\n            if (e.action === \"itemchange\") {\n                if (this.dropdowntree._isMultipleSelection()) {\n                    if(e.field === \"checked\"){\n                        this.dropdowntree._checkValue(e.items[0]);\n                    }\n                } else {\n                    if(e.field !== \"checked\" && e.field !== \"expanded\" && e.items[0].selected){\n                        this.dropdowntree._selectValue(e.items[0]);\n                    }\n                }\n            } else {\n                this.dropdowntree.refresh(e);\n            }\n        }\n\n    });\n\n    kendo.ui._dropdowntree = Tree;\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('kendo.dropdowntree',[ \"./dropdowntree/treeview\", \"./kendo.popup\", \"./kendo.binder\", \"./kendo.html.chip\", \"./kendo.html.chiplist\", \"./kendo.html.button\", \"./kendo.html.input\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dropdowntree\",\n    name: \"DropDownTree\",\n    category: \"web\",\n    description: \"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.\",\n    depends: [ \"treeview\", \"popup\", \"binder\", \"html.chip\", \"html.chiplist\", \"html.button\", \"html.input\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        Widget = ui.Widget,\n        TreeView = ui._dropdowntree,\n        ObservableArray = kendo.data.ObservableArray,\n        ObservableObject = kendo.data.ObservableObject,\n        extend = $.extend,\n        activeElement = kendo._activeElement,\n        ns = \".kendoDropDownTree\",\n        keys = kendo.keys,\n        support = kendo.support,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        browser = support.browser,\n        outerWidth = kendo._outerWidth,\n        DOT = \".\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        HOVER = \"k-hover\",\n        FOCUSED = \"k-focus\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        quotRegExp = /\"/g,\n\n        CHIP = \".k-chip\";\n\n    var DropDownTree = kendo.ui.Widget.extend( {\n        init: function(element, options) {\n            this.ns = ns;\n\n            kendo.ui.Widget.fn.init.call(this, element, options);\n            this._selection = this._getSelection();\n            this._focusInputHandler = this._focusInput.bind(this);\n            this._initial = this.element.val();\n\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value === null || !value.length) {\n                this._noInitialValue = true;\n            }\n\n            if (!this._isNullorUndefined(value)) {\n                this._valueMethodCalled = true;\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            this._inputTemplate();\n\n            this._accessors();\n            this._setTreeViewOptions(this.options);\n            this._dataSource();\n            this._selection._initWrapper();\n            this._applyCssClasses();\n            this._placeholder(true);\n            this._tabindex();\n            this.wrapper.data(TABINDEX, this.wrapper.attr(TABINDEX));\n\n            this.tree = $('<div/>')\n            .attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            this.list = $(\"<div class='k-list-container'/>\")\n                .append(this.tree);\n\n            this._header();\n            this._noData();\n            this._footer();\n            this._reset();\n            this._popup();\n            this.popup.one(\"open\", this._popupOpen.bind(this));\n            this._clearButton();\n            this._filterHeader();\n            this._treeview();\n\n            this._renderFooter();\n\n            this._checkAll();\n            this._enable();\n            this._toggleCloseVisibility();\n\n            this._aria();\n\n            if (!this.options.autoBind) {\n                var text = options.text || \"\";\n                if (!this._isNullorUndefined(options.value)) {\n                    this._preselect(options.value);\n                } else if (text) {\n                    this._textAccessor(text);\n                } else if (options.placeholder) {\n                    this._placeholder(true);\n                }\n            }\n\n            var disabled = $(this.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                this.enable(false);\n            }\n            this._valueMethodCalled = false;\n            kendo.notify(this);\n        },\n\n        _preselect: function(data, value){\n            this._selection._preselect(data, value);\n        },\n\n        _setTreeViewOptions: function(options) {\n            var treeviewOptions = {\n                autoBind: options.autoBind,\n                checkboxes: options.checkboxes,\n                dataImageUrlField: options.dataImageUrlField,\n                dataSpriteCssClassField: options.dataSpriteCssClassField,\n                dataTextField: options.dataTextField,\n                dataUrlField: options.dataUrlField,\n                loadOnDemand: options.loadOnDemand,\n                size: options.size\n            };\n\n            this.options.treeview = $.extend({}, treeviewOptions, this.options.treeview);\n\n            if (options.template) {\n                this.options.treeview.template = options.template;\n            }\n\n            if (options.size) {\n                this.options.treeview.size = options.size;\n            }\n        },\n\n        _dataSource: function() {\n            var rootDataSource = this.options.dataSource;\n\n            this.dataSource = kendo.data.HierarchicalDataSource.create(rootDataSource);\n            if (rootDataSource) {\n                $.extend(this.options.treeview,{\n                    dataSource: this.dataSource\n                });\n            }\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n            popup.wrapper = kendo.wrap(popup.element);\n        },\n\n        _getSelection: function() {\n            if (this._isMultipleSelection()) {\n                this.options._altname = \"MultiSelectDropDownTree\";\n                return new ui.DropDownTree.MultipleSelection(this);\n            } else {\n                return new ui.DropDownTree.SingleSelection(this);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            this._isDataSourceSet = true;\n            if(this._tags){\n                this._noInitialValue = true;\n                this.setValue([]);\n                this._tags.empty();\n                this.span.show();\n                this._multipleTags.empty();\n            }\n            this.dataSource = dataSource;\n            this.treeview.setDataSource(dataSource);\n            this._isDataSourceSet = false;\n        },\n\n        _isMultipleSelection: function() {\n            return this.options && (this.options.treeview.checkboxes || this.options.checkboxes);\n        },\n\n        options: {\n            name: \"DropDownTree\",\n            animation: {},\n            autoBind: true,\n            autoClose: true,\n            autoWidth: false,\n            clearButton: true,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            dataImageUrlField: \"\",\n            dataSpriteCssClassField: \"\",\n            dataUrlField: \"\",\n            delay: 500,\n            enabled: true,\n            enforceMinLength: false,\n            filter: \"none\",\n            height: 200,\n            ignoreCase: true,\n            index: 0,\n            loadOnDemand: false,\n            messages: {\n                \"singleTag\": \"item(s) selected\",\n                \"clear\": \"clear\",\n                \"deleteTag\": \"delete\",\n                \"noData\": \"No data found.\"\n            },\n            minLength: 1,\n            checkboxes: false,\n            noDataTemplate: true,\n            placeholder: \"\",\n            checkAll:false,\n            checkAllTemplate: \"Check all\",\n            tagMode: \"multiple\",\n            template: null,\n            text: null,\n            treeview: {},\n            valuePrimitive: false,\n            footerTemplate: \"\",\n            headerTemplate: \"\",\n            value: null,\n            valueTemplate: null,\n            popup: null,\n            filterLabel: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            \"dataBound\",\n            CHANGE,\n            \"select\",\n            \"filtering\"\n        ],\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        dataItem: function (node){\n            return this.treeview.dataItem(node);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n            this._toggleCloseVisibility();\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n            this._toggleCloseVisibility();\n        },\n\n        toggle: function(open) {\n            this._toggle(open);\n        },\n\n        open: function() {\n            var popup = this.popup;\n\n            if(!this.options.autoBind && !this.dataSource.data().length){\n                this.treeview._progress(true);\n                if(this._isFilterEnabled()){\n                    this._search();\n                } else {\n                    this.dataSource.fetch();\n                }\n            }\n\n            if (popup.visible() || !this._allowOpening()) {\n                return;\n            }\n\n            if(this._isMultipleSelection()){\n                popup.element.addClass(\"k-multiple-selection\");\n            }\n            popup.element.addClass(\"k-popup-dropdowntree\");\n\n            popup.one(\"activate\", this._focusInputHandler);\n            popup._hovered = true;\n            popup.open();\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        search: function(word) {\n            var options = this.options;\n            var filter;\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                filter = this._getFilter(word);\n                if(this.trigger(\"filtering\", { filter: filter }) ||\n                 Array.isArray(this.options.dataTextField)){\n                    return;\n                }\n\n                this._filtering = true;\n                this.treeview.dataSource.filter(filter);\n            }\n        },\n\n        _getFilter: function (word){\n            return {\n                field: this.options.dataTextField,\n                operator: this.options.filter,\n                value: word,\n                ignoreCase: this.options.ignoreCase\n              };\n        },\n\n        refresh: function() {\n            var data = this.treeview.dataSource.flatView();\n            this._renderFooter();\n            this._renderNoData();\n            if (this.filterInput && this.checkAll) {\n                this.checkAll.toggle(!this.filterInput.val().length);\n            }\n\n            this.tree.toggle(!!data.length);\n            $(this.noData).toggle(!data.length);\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._setTreeViewOptions(options);\n            this._dataSource();\n            if (this.options.treeview || options.size) {\n                this.treeview.setOptions(this.options.treeview);\n            }\n\n            if (options.height && this.tree) {\n                this.tree.css('max-height', options.height);\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n            if (this.span && (this._isMultipleSelection() || this.span.hasClass(\"k-readonly\"))) {\n                this._placeholder(true);\n            }\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._checkAll();\n            this._enable();\n            if (options && (options.enable || options.enabled)) {\n                this.enable(true);\n            }\n            this._clearButton();\n        },\n\n        destroy: function() {\n            kendo.ui.Widget.fn.destroy.call(this);\n            if(this.treeview){\n                this.treeview.destroy();\n            }\n            this.popup.destroy();\n\n            this.wrapper.off(ns);\n            this._clear.off(ns);\n            if (this.filterInput) {\n                this.filterInput.off(ns);\n            }\n\n            if(this.tagList){\n                this.tagList.off(ns);\n            }\n\n            kendo.unbind(this.tagList);\n            if (this.options.checkAll && this.checkAll) {\n                this.checkAll.off(ns);\n            }\n\n            if (this._form) {\n                this._form.off(\"reset\", this._resetHandler);\n            }\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n        },\n\n        items: function() {\n            return this.treeview.items();\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if(value){\n                if(that.filterInput && that.dataSource._filter){\n                    that._filtering = true;\n                    that.dataSource.filter({});\n                } else if (!that.dataSource.data().length || !that.treeview.dataSource.data().length){\n                    that.dataSource.fetch(function() {\n                        if(that.options.loadOnDemand){\n                            that._selection._setValue(value);\n                        } else {\n                            that.one('allNodesAreLoaded', function(){\n                                that._selection._setValue(value);\n                            });\n                        }\n                    });\n\n                    return;\n                }\n            }\n\n            return that._selection._setValue(value);\n        },\n\n        text: function(text) {\n            var loweredText;\n            var ignoreCase = this.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined && !this._isMultipleSelection()) {\n                if (typeof text !== \"string\") {\n                    this._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text : text.toLowerCase();\n\n                this._selectItemByText(loweredText);\n\n                this._textAccessor(loweredText);\n            } else {\n                return this._textAccessor();\n            }\n        },\n\n        _aria: function() {\n            var input = this.wrapper.find(\"span.k-input-inner\");\n\n            this.wrapper.attr({\n                \"aria-haspopup\": \"tree\",\n                \"aria-expanded\": false,\n                \"aria-owns\": this.treeview.element.attr(\"id\"),\n                \"role\": \"listbox\"\n            });\n\n            this._activeId = kendo.guid();\n            this._ariaLabel(this.wrapper);\n\n            if (this.filterInput && this.options.filterLabel) {\n                this.filterInput.attr(\"aria-label\", this.options.filterLabel);\n            }\n\n            if(!this.options.checkboxes && input.text().length) {\n                input.attr(\"role\", \"option\");\n                input.attr(\"aria-selected\", \"true\");\n                input.attr(\"id\", this._activeId);\n\n                this.wrapper.attr(\"aria-activedescendant\", this._activeId);\n            } else if(this.options.checkboxes) {\n                this.wrapper.attr({\n                    \"aria-multiselectable\": true,\n                    \"aria-describedby\": this.tagList[0].id\n                });\n\n                this.tagList.attr(\"role\", \"none\");\n            }\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            this._angularElement(header, \"cleanup\");\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n            list.list.prepend(header);\n\n            this._angularElement(list.header, \"compile\");\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ?  list.options.messages.noData : list.options.noDataTemplate;\n\n            list.angular(\"cleanup\", function() { return { elements: noData }; });\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $('<div class=\"k-no-data\" style=\"display: none;\"></div>').appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            this._angularElement(noData, \"cleanup\");\n            noData.html(list.noDataTemplate({ instance: list }));\n            this._angularElement(noData, \"compile\");\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n\n            this._angularElement(footer, \"cleanup\");\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $('<div class=\"k-footer\"></div>').appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderFooter: function() {\n            var list = this;\n            var footer = list.footer;\n\n            if (!footer) {\n                return;\n            }\n\n            this._angularElement(footer, \"cleanup\");\n            footer.html(list.footerTemplate({ instance: list }));\n            this._angularElement(footer, \"compile\");\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list,\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle  && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _popup: function() {\n            var list = this;\n\n            if(list.options.checkboxes && list.options.checkAll) {\n                list.list.attr(\"role\", \"application\");\n            }\n\n            list.popup = new ui.Popup(list.list, extend({}, list.options.popup, {\n                anchor: list.wrapper,\n                open: list._openHandler.bind(list),\n                close: list._closeHandler.bind(list),\n                animation: list.options.animation,\n                isRtl: support.isRtl(list.wrapper),\n                autosize :list.options.autoWidth\n            }));\n        },\n\n        _angularElement: function(element, action) {\n            if (!element) {\n                return;\n            }\n\n            this.angular(action, function() {\n                return { elements: element };\n            });\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.treeview.dataSource.flatView().length;\n        },\n\n        _placeholder: function(show) {\n            if (this.span) {\n                this.span.toggleClass(\"k-readonly\", show).text(show? this.options.placeholder: \"\");\n            }\n\n            if(this.span.text().trim().length > 0) {\n                this.span.parent().attr({\n                    role: \"option\",\n                    \"aria-selected\": true\n                });\n            } else {\n                this.span.parent().removeAttr(\"role\");\n                this.span.parent().removeAttr(\"aria-selected\");\n            }\n        },\n\n        _currentValue: function(dataItem) {\n            var currentValue = this._value(dataItem);\n            if (!currentValue && currentValue !== 0) {\n                currentValue = dataItem;\n            }\n\n            return currentValue;\n        },\n\n        _checkValue: function(dataItem) {\n            var value = \"\";\n            var indexOfValue = -1;\n            var currentValue = this.value();\n            var isMultiple = this.options.tagMode === \"multiple\";\n\n            if (dataItem || dataItem === 0) {\n                if(dataItem.level){\n                    dataItem._level = dataItem.level();\n                }\n\n                value = this._currentValue(dataItem);\n\n                indexOfValue = currentValue.indexOf(value);\n            }\n\n            if (dataItem.checked) {\n                var alreadyAddedTag = $.grep(this._tags, function( item ) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                if (alreadyAddedTag.length){\n                    return;\n                }\n\n                var itemToAdd = new ObservableObject(dataItem.toJSON());\n                dataItem._tagUid = itemToAdd.uid;\n                this._tags.push(itemToAdd);\n\n                if (this._tags.length === 1) {\n                    this.span.hide();\n\n                    if (!isMultiple) {\n                        this._multipleTags.push(itemToAdd);\n                    }\n                }\n\n                if (indexOfValue === -1) {\n                    currentValue.push(value);\n                    this.setValue(currentValue);\n                }\n            } else {\n                var itemToRemove = this._tags.find(function(item){\n                    return item.uid === dataItem._tagUid;\n                });\n\n                var idx = this._tags.indexOf(itemToRemove);\n\n                if (idx !== -1) {\n                    this._tags.splice(idx, 1);\n                } else {\n                    this._treeViewCheckAllCheck(dataItem);\n                    return;\n                }\n\n                if (this._tags.length === 0) {\n                    this.span.show();\n                    if (!isMultiple) {\n                        this._multipleTags.splice(0, 1);\n                    }\n                }\n                if (indexOfValue !== -1) {\n                    currentValue.splice(indexOfValue, 1);\n                    this.setValue(currentValue);\n                }\n            }\n\n            this._treeViewCheckAllCheck(dataItem);\n            if (!this._preventChangeTrigger && !this._valueMethodCalled && !this._noInitialValue) {\n                this.trigger(CHANGE);\n            }\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._updateSelectedOptions();\n        },\n\n        _updateSelectedOptions: function(){\n            if(this.element[0].tagName.toLowerCase() !== 'select'){\n                return;\n            }\n\n            var selectedItems = this._tags;\n            var options = '';\n            var dataItem = null;\n            var value = null;\n\n            if (selectedItems.length) {\n                for (var idx = 0; idx < selectedItems.length; idx++) {\n                    dataItem = selectedItems[idx];\n\n                    value = this._value(dataItem);\n                    options += this._option(value, this._text(dataItem), true);\n                }\n            }\n\n            this.element.html(options);\n        },\n\n        _option: function(dataValue, dataText, selected) {\n            var option = \"<option\";\n\n            if (dataValue !== undefined) {\n                dataValue += \"\";\n\n                if (dataValue.indexOf('\"') !== -1) {\n                    dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                }\n\n                option += ' value=\"' + dataValue + '\"';\n            }\n\n            if (selected) {\n                option += ' selected';\n            }\n\n            option += \">\";\n\n            if (dataText !== undefined) {\n                option += kendo.htmlEncode(dataText);\n            }\n\n            return option += \"</option>\";\n        },\n\n        _selectValue: function(dataItem) {\n            var value = \"\";\n            var text = \"\";\n\n            if (dataItem || dataItem === 0) {\n                if(dataItem.level){\n                    dataItem._level = dataItem.level();\n                }\n                text = this._text(dataItem) || dataItem;\n                value = this._currentValue(dataItem);\n            }\n\n            if (value === null) {\n                value = \"\";\n            }\n            this.setValue(value);\n            this._textAccessor(text, dataItem);\n            this._accessor(value);\n\n            if(!this._preventChangeTrigger && !this._valueMethodCalled){\n                this.trigger(CHANGE);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearClick: function(e) {\n            e.stopPropagation();\n            this.wrapper.trigger(\"focus\");\n            this._clearTextAndValue();\n        },\n\n        _clearTextAndValue: function() {\n            this.setValue([]);\n            this._clearInput();\n            this._clearText();\n            this._selection._clearValue();\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearText: function() {\n            if (this.options.placeholder) {\n                this._placeholder(true);\n            } else {\n                if (this.span) {\n                    this.span.html(\"\");\n                }\n            }\n        },\n\n        _inputTemplate: function() {\n            var template = this.options.valueTemplate;\n\n            if (!template) {\n                template = kendo.template('#:this._text(data)#', { useWithBlock: false }).bind(this);\n            } else {\n                template = kendo.template(template);\n            }\n\n            this.valueTemplate = template;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(DOT), text);\n                assign(dataItem, this.options.dataValueField.split(DOT), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        },\n\n        _textAccessor: function(text, dataItem) {\n            var valueTemplate = this.valueTemplate;\n            var span = this.span;\n\n            if (text === undefined) {\n                return span.text();\n            }\n\n            span.removeClass(\"k-readonly\");\n\n            if (!dataItem && ($.isPlainObject(text) || text instanceof ObservableObject)) {\n                dataItem = text;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            var getElements = function() {\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            this.angular(\"cleanup\", getElements);\n\n            try {\n                span.html(valueTemplate(dataItem));\n            } catch(e) {\n                //dataItem has missing fields required in custom template\n                if (span) {\n                    span.html(\"\");\n                }\n            }\n\n            this.angular(\"compile\", getElements);\n        },\n\n        _accessors: function() {\n            var element = this.element;\n            var options = this.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            var getterFunction = function (field) {\n                if (Array.isArray(field)) {\n                    var count = field.length;\n                    var levels = $.map(field, function(x) {\n                        return function(d){ return d[x];};\n                    });\n\n                    return function (dataItem) {\n                        var level = dataItem._level;\n\n                        if(!level && level !== 0){\n                            return;\n                        }\n\n                        return levels[Math.min(level, count-1)](dataItem);\n                    };\n                } else {\n                    return getter(field);\n                }\n            };\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            options.dataTextField = options.dataTextField || \"text\";\n            options.dataValueField = options.dataValueField || \"value\";\n\n            this._text = getterFunction(options.dataTextField);\n            this._value = getterFunction(options.dataValueField);\n        },\n\n        _accessor: function(value, idx) {\n            return this._accessorInput(value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _clearInput: function() {\n            var element = this.element[0];\n            element.value = \"\";\n        },\n\n        _clearButton: function() {\n            var clearTitle = this.options.messages.clear;\n\n            if(!this._clear){\n                this._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\"><span class=\"k-icon k-i-x\"></span></span>').attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.tagList || this.span.parent());\n                this.wrapper.addClass(\"k-dropdowntree-clearable\");\n            } else {\n                if (!this.options.clearButton) {\n                    this._clear.remove();\n                }\n            }\n        },\n\n        _toggleCloseVisibility: function() {\n            var isReadOnly = this.element.attr(READONLY);\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length;\n            var valueDoesNotEqualPlaceHolder = this.element.val() && this.element.val() !== this.options.placeholder;\n\n            if ((!isReadOnly && (hasValue || valueDoesNotEqualPlaceHolder))) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        _showClear: function() {\n            if(this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _hideClear: function() {\n            if(this._clear) {\n                this._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", true);\n                 this.tree.attr(\"aria-hidden\", false).attr(\"role\", \"tree\");\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", false);\n                 this.tree.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _treeview: function() {\n            var that = this;\n            if (that.options.height) {\n                that.tree.css('max-height',that.options.height);\n            }\n            that.tree.attr('id', kendo.guid());\n            that.treeview = new TreeView(that.tree, extend({ size: that.options.size }, that.options.treeview), that);\n            that.dataSource = that.treeview.dataSource;\n\n            that.treeview.bind(\"select\",function(e) {\n                that.trigger(\"select\", e);\n            });\n        },\n\n        _treeViewDataBound: function(e) {\n            if (e.node && this._prev && this._prev.length) {\n                e.sender.expand(e.node);\n            }\n\n            if(this._filtering){\n                if(!e.node){\n                    this._filtering = false;\n                }\n\n                if (!this._isMultipleSelection()) {\n                    this._deselectItem(e);\n                }\n                return;\n            }\n\n            if (!this.treeview) {\n                this.treeview = e.sender;\n            }\n\n            if (!e.node) {\n                var rootItems = e.sender.dataSource.data();\n\n                this._checkLoadedItems(rootItems);\n                if(this._noInitialValue){\n                    this._noInitialValue = false;\n                }\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    var subItems = rootItem.children.data();\n                    this._checkLoadedItems(subItems);\n                }\n            }\n            this.trigger(\"dataBound\", e);\n        },\n\n        _deselectItem: function(e){\n            var items = [];\n            if (!e.node) {\n                items = e.sender.dataSource.data();\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    items = rootItem.children.data();\n                }\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].selected &&\n                    !this._valueComparer(items[i], this.value())) {\n                    items[i].set(\"selected\", false);\n                }\n            }\n        },\n\n        _checkLoadedItems: function(items) {\n            var value = this.value();\n\n            if(!items){\n                return;\n            }\n\n            for (var idx = 0; idx < items.length; idx++) {\n                this._selection._checkLoadedItem(items[idx], value);\n            }\n        },\n\n        _treeViewCheckAllCheck: function(dataItem) {\n            if (this.options.checkAll && this.checkAll) {\n                this._getAllChecked();\n\n                if (dataItem.checked) {\n                    this._checkCheckAll();\n                } else {\n                    this._uncheckCheckAll();\n                }\n            }\n        },\n\n        _checkCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreChecked) {\n                checkAllCheckbox.prop('checked', true)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _uncheckCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreUnchecked) {\n                checkAllCheckbox.prop('checked', false)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-searchbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    '<span class=\"k-input-icon k-icon k-i-search\"></span>' +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .parent()\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this._disableCheckChildren();\n\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-haspopup\": \"listbox\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.filterInput.on(\"input\" , this._filterChange.bind(this));\n\n                $(filterTemplate)\n                    .insertBefore(this.tree)\n                    .find(\".k-searchbox\")\n                    .append(this.filterInput);\n            }\n        },\n\n        _filterChange: function() {\n            if (this.filterInput) {\n                this._search();\n            }\n        },\n\n        _disableCheckChildren: function() {\n            if (this._isMultipleSelection() && this.options.treeview.checkboxes && this.options.treeview.checkboxes.checkChildren) {\n                this.options.treeview.checkboxes.checkChildren = false;\n            }\n        },\n\n        _checkAll: function() {\n            if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox-label, .k-checkbox\")\n                    .off(ns);\n                this.checkAll.remove();\n\n                this.checkAll = null;\n            }\n\n            if (this._isMultipleSelection() && this.options.checkAll) {\n                var checkAllCheckbox = html.renderCheckBox(extend({}, this.options, {\n                    label: \"Check All\",\n                    rounded: \"medium\"\n                }));\n                this.checkAll = $('<div class=\"k-check-all\">' + checkAllCheckbox + '</div>').insertBefore(this.tree);\n                this.checkAll.find(\".k-checkbox-label\").html(kendo.template(this.options.checkAllTemplate)({ instance: this }));\n                this.checkAll.find(\".k-checkbox\")\n                                .on(\"change\" + ns, this._changeCheckAll.bind(this))\n                                .on(\"keydown\" + ns, this._keydownCheckAll.bind(this));\n                this._disabledCheckedItems = [];\n                this._disabledUnCheckedItems = [];\n\n                this._getAllChecked();\n\n                if (!this._allItemsAreUnchecked) {\n                    this._checkCheckAll();\n                }\n            }\n        },\n\n        _changeCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(isChecked);\n        },\n\n        _updateCheckAll: function(isChecked) {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            this._toggleCheckAllItems(isChecked);\n            checkAllCheckbox.prop('checked', isChecked);\n            if (this._disabledCheckedItems.length && this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', true);\n            } else if (this._disabledCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', !isChecked);\n            } else if (this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', isChecked);\n            } else {\n                checkAllCheckbox.prop('indeterminate', false);\n            }\n            this._disabledCheckedItems = [];\n            this._disabledUnCheckedItems = [];\n        },\n\n        _keydownCheckAll: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC || key === keys.TAB) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.UP) {\n                if (this.filterInput) {\n                    this.filterInput.trigger(\"focus\");\n                } else {\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.DOWN) {\n                if (this.tree && this.tree.is(\":visible\")) {\n                    this.tree.focus();\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.SPACEBAR && (browser.msie || browser.edge)) {\n                this._clickCheckAll();\n                e.preventDefault();\n            }\n        },\n\n        _clickCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(!isChecked);\n\n            checkAllCheckbox.trigger(\"focus\");\n\n        },\n        //treeview\n        _dfs: function(items, action, prop) {\n            for (var idx = 0; idx < items.length; idx++) {\n                if (!this[action](items[idx], prop)) {\n                    break;\n                }\n                this._traverceChildren(items[idx], action, prop);\n            }\n        },\n\n        _uncheckItemByUid: function(uid) {\n            this._dfs(this.dataSource.data(), '_uncheckItemEqualsUid', uid);\n        },\n\n        _uncheckItemEqualsUid: function(item, uid) {\n            if (item.enabled !== false && item._tagUid == uid) {\n                item.set(\"checked\", false);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByText: function(text) {\n            this._dfs(this.dataSource.data(), '_itemEqualsText', text);\n        },\n\n        _itemEqualsText: function(item, text) {\n            if (item.enabled !== false && this._text(item) === text) {\n                this.treeview.select(this.treeview.findByUid(item.uid));\n                this._selectValue(item);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByValue: function(value) {\n            this._dfs(this.dataSource.data(), '_itemEqualsValue', value);\n        },\n\n        _itemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n\n                this.treeview.select(this.treeview.findByUid(item.uid));\n\n                return false;\n            }\n            return true;\n        },\n\n        _checkItemByValue: function(value) {\n            var items = this.treeview.dataItems();\n            for (var idx = 0; idx < value.length; idx++) {\n                this._dfs(items, '_checkItemEqualsValue', value[idx]);\n            }\n        },\n\n        _checkItemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n                    item.set(\"checked\", true);\n                return false;\n            }\n            return true;\n        },\n\n        _valueComparer: function(item, value) {\n            var itemValue = this._value(item);\n            var itemText;\n\n            if (!this._isNullorUndefined(itemValue)) {\n                if(this._isNullorUndefined(value)){\n                    return false;\n                }\n\n                var newValue = this._value(value);\n\n                if(newValue){\n                    return itemValue == newValue;\n                }else{\n                    return itemValue == value;\n                }\n            }\n\n            itemText = this._text(item);\n            if (itemText) {\n                if (this._text(value)) {\n                    return itemText == this._text(value);\n                } else {\n                    return itemText == value;\n                }\n            }\n\n            return false;\n        },\n\n        _isNullorUndefined: function(value){\n            return value === undefined || value === null;\n        },\n\n        _getAllChecked: function() {\n            this._allCheckedItems = [];\n            this._allItemsAreChecked = true;\n            this._allItemsAreUnchecked = true;\n\n            this._dfs(this.dataSource.data(), '_getAllCheckedItems');\n\n            return this._allCheckedItems;\n        },\n\n        _getAllCheckedItems: function(item) {\n            if (this._allItemsAreChecked) {\n                this._allItemsAreChecked =  item.checked;\n            }\n\n            if (this._allItemsAreUnchecked) {\n                this._allItemsAreUnchecked = !item.checked;\n            }\n\n            if (item.checked) {\n                this._allCheckedItems.push(item);\n            }\n            return true;\n        },\n\n        _traverceChildren: function(item, action, prop) {\n            var childrenField = (item._childrenOptions && item._childrenOptions.schema) ? item._childrenOptions.schema.data : null;\n            var subItems = item[childrenField] || item.items || item.children;\n\n            if (!subItems) {\n                return;\n            }\n\n            this._dfs(subItems, action, prop);\n        },\n\n        _toggleCheckAllItems: function(checked) {\n            this._dfs(this.dataSource.data(), '_checkAllCheckItem', checked);\n        },\n\n        _checkAllCheckItem: function(item, checked) {\n            if (item.enabled === false) {\n                if (item.checked) {\n                    this._disabledCheckedItems.push(item);\n                } else {\n                    this._disabledUnCheckedItems.push(item);\n                }\n            } else {\n                item.set(\"checked\", checked);\n            }\n            return true;\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n            if (that._isMultipleSelection()) {\n                that.tagList.off(CLICK + ns);\n            }\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                that._clear.on(\"click\" + ns, that._clearClick.bind(that));\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .on(\"keydown\" + ns, that._keydown.bind(that))\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n\n                that.wrapper.on(CLICK + ns, that._wrapperClick.bind(that));\n\n                if (this._isMultipleSelection()) {\n                    that.tagList.on(CLICK + ns, \"span.k-chip\", function(e) {\n                        $(e.currentTarget).addClass(FOCUSED);\n                    });\n\n                    that.tagList.on(CLICK + ns, \".k-i-x-circle\", function(e) {\n                        that._removeTagClick(e);\n                    });\n                }\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper\n                    .addClass(STATEDISABLED);\n            } else {\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX));\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED);\n\n                wrapper\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable);\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n\n            if (this._isMultipleSelection()) {\n                this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED);\n            }\n            if (!that._prevent) {\n                this.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _toggle: function(open) {\n            open = open !== undefined ? open : !this.popup.visible();\n\n            this[open ? OPEN : CLOSE]();\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _focusInput: function() {\n            if (this.filterInput) {\n                this.filterInput.trigger(\"focus\");\n            } else if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n            } else if (this.tree.is(\":visible\")) {\n                this.tree[0].focus({preventScroll: true});\n                this._ie11PreventScrollOnFocus();\n            }\n        },\n\n        _ie11PreventScrollOnFocus: function(){\n            if (browser.msie && browser.version == 11) {\n                var popup = this.popup;\n                popup._toggleResize(false);\n                setTimeout(function () {\n                    popup._toggleResize(true);\n                },50);\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isFilterInputActive;\n            var isWrapperActive;\n            var focused, tagItem;\n\n            var isPopupVisible = this.popup.visible();\n\n            if (this.filterInput) {\n                isFilterInputActive = this.filterInput[0] === activeElement();\n            }\n\n            if (this.wrapper) {\n                isWrapperActive = this.wrapper[0] === activeElement();\n            }\n\n            if(isWrapperActive){\n                if (key === keys.ESC) {\n                    this._clearTextAndValue();\n                    e.preventDefault();\n                    return;\n                }\n\n                if(this._isMultipleSelection()){\n                    if (key === keys.LEFT) {\n                        this._focusPrevTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.RIGHT) {\n                        this._focusNextTag();\n                          e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.HOME) {\n                        this._focusFirstTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.END) {\n                        this._focusLastTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.DELETE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if(focused.length){\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.BACKSPACE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        } else {\n                            focused = this._focusLastTag();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            }\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                }\n            }\n\n\n            if (isFilterInputActive) {\n                if (key === keys.ESC) {\n                    this._clearFilter();\n                }\n\n                if ((key === keys.UP) && !altKey) {\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                }\n\n                if(browser.msie && browser.version < 10){\n                    if (key === keys.BACKSPACE || key === keys.DELETE) {\n                        this._search();\n                    }\n                }\n\n                if(key === keys.TAB){\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.ENTER && this._typingTimeout && this.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isFilterInputActive) {\n                this._toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            if ((altKey && key === keys.DOWN) && !isPopupVisible) {\n                this.open();\n                e.preventDefault();\n            }\n\n            if ((key === keys.DOWN) && isPopupVisible) {\n                if (this.filterInput && !isFilterInputActive) {\n                    this.filterInput.trigger(\"focus\");\n                } else if (this.checkAll && this.checkAll.is(\":visible\")) {\n                    this.checkAll.find('input').trigger(\"focus\");\n                } else if(this.tree.is(\":visible\")) {\n                    this.tree[0].focus({preventScroll: true});\n                    this._ie11PreventScrollOnFocus();\n                }\n                e.preventDefault();\n            }\n\n            if(key === keys.TAB && isPopupVisible){\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n            }\n        },\n\n        _focusPrevTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .prev(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusLastTag();\n            }\n        },\n\n        _focusNextTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .next(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusFirstTag();\n            }\n        },\n\n        _focusFirstTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var firstTag = this.tagList.children(CHIP).first()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return firstTag;\n        },\n\n        _focusLastTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var lastTag = this.tagList.children(CHIP).last()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return lastTag;\n        },\n\n        _clearDisabledTag: function() {\n            this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED).removeAttr(\"id\");\n        },\n\n        _search: function() {\n            var that = this;\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.filterInput.val();\n\n                if (that._prev !== value) {\n                    that._prev = value;\n                    that.search(value);\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _clearFilter: function() {\n            if(this.filterInput.val().length){\n                this.filterInput.val(\"\");\n                this._prev = \"\";\n                this._filtering = true;\n                this.treeview.dataSource.filter({});\n            }\n        },\n\n        _removeTagClick: function(e) {\n            e.stopPropagation();\n            var tagItem = this._tags[$(e.currentTarget.closest(CHIP)).index()];\n            this._removeTag(tagItem);\n        },\n\n        _removeTag: function(tagItem) {\n           if(!tagItem){\n                return;\n           }\n\n           var uid = tagItem.uid;\n           this._uncheckItemByUid(uid);\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    ui.plugin(DropDownTree);\n\n    kendo.cssProperties.registerPrefix(\"DropDownTree\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    kendo.cssProperties.registerPrefix(\"MultiSelectDropDownTree\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"MultiSelectDropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    var SingleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            this._wrapper();\n            this._span();\n        },\n\n        _preselect: function(data){\n            var dropdowntree = this._dropdowntree;\n\n            dropdowntree._selectValue(data);\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-dropdowntree\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            dropdowntree._focused = dropdowntree.wrapper = wrapper\n                .addClass(\"k-dropdowntree k-picker\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .removeClass('k-invalid')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\"\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _span: function() {\n            var dropdowntree = this._dropdowntree,\n                wrapper = dropdowntree.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                span;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                wrapper.append('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>' +\n                                html.renderButton('<button unselectable=\"on\" class=\"k-input-button\" aria-label=\"select\" tabindex=\"-1\"></button>', extend({}, dropdowntree.options, {\n                                    icon: \"arrow-s\",\n                                    shape: null,\n                                    rounded: null\n                                })))\n                       .append(dropdowntree.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            dropdowntree.span = span;\n            dropdowntree._arrow = wrapper.find(\".k-input-button\");\n            dropdowntree._arrowIcon = dropdowntree._arrow.find(\".k-icon\");\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var currentValue;\n\n            if (value === undefined || value === null) {\n                currentValue = dropdowntree._values.slice()[0];\n                value = (typeof currentValue === \"object\") ? currentValue : dropdowntree._accessor() || currentValue;\n                return value === undefined || value === null ? \"\" : value;\n            }\n            dropdowntree._valueMethodCalled = true;\n            if (value.length === 0) {\n                dropdowntree._clearTextAndValue();\n                dropdowntree._valueMethodCalled = false;\n                return;\n            }\n\n            dropdowntree._selectItemByValue(value);\n            dropdowntree._toggleCloseVisibility();\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var selectedNode = dropdowntree.treeview.select();\n\n            if (dropdowntree.treeview.dataItem(selectedNode)) {\n                dropdowntree.treeview.dataItem(selectedNode).set('selected', false);\n                if(!dropdowntree._valueMethodCalled){\n                    dropdowntree.trigger(CHANGE);\n                }\n            }\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (!dropdowntree._isNullorUndefined(value) && value!==\"\") {\n                if(dropdowntree._valueComparer(tempItem, value)){\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"selected\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                } else if (tempItem.selected){\n                    dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                }\n\n            } else if (!value && tempItem.selected){\n                dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n            }\n        }\n    });\n\n    var MultipleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            var dropdowntree = this._dropdowntree;\n\n            this._tagTemplate();\n            dropdowntree.element.attr(\"multiple\", \"multiple\").hide();\n            this._wrapper();\n            dropdowntree._tags = new ObservableArray([]);\n            dropdowntree._multipleTags = new ObservableArray([]);\n            this._tagList();\n            dropdowntree.span = $('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>').appendTo(dropdowntree.tagList).find(\".k-input-value-text\");\n\n        },\n\n        _preselect: function(data, value){\n            var dropdowntree = this._dropdowntree;\n            var valueToSelect = value || dropdowntree.options.value;\n\n            if (!Array.isArray(data) && !(data instanceof kendo.data.ObservableArray)) {\n                data = [data];\n            }\n\n            if ($.isPlainObject(data[0]) || data[0] instanceof kendo.data.ObservableObject || !dropdowntree.options.dataValueField) {\n                dropdowntree.dataSource.data(data);\n\n                dropdowntree.value(valueToSelect);\n            }\n        },\n\n        _tagTemplate: function() {\n            var dropdowntree = this._dropdowntree;\n            var options = dropdowntree.options;\n            var tagTemplate = options.valueTemplate;\n            var isMultiple = options.tagMode === \"multiple\";\n            var singleTag = options.messages.singleTag;\n\n            tagTemplate = tagTemplate ? kendo.template(tagTemplate) : dropdowntree.valueTemplate;\n\n            dropdowntree.valueTemplate = function(data) {\n                return html.renderChip('<span unselectable=\"on\" role=\"option\"' +\n                    'class=\"' + ((data.enabled === false) ? \"k-disabled\" : \"\") + '\"' +\n                    ((data.enabled === false) ? 'aria-disabled=\"true\"' : '') +\n                    '>' +\n                    '</span>', $.extend({}, options, {\n                            fillMode: \"solid\",\n                            themeColor: \"base\",\n                            rounded: \"medium\",\n                            attr: {\n                                unselectable: \"on\"\n                            },\n                            text: (isMultiple ?  tagTemplate(data) : ('<span unselectable=\"on\" data-bind=\"text: tags.length\"></span>' +\n                            '<span unselectable=\"on\">&nbsp;' + singleTag +'</span>' )),\n                            removable: isMultiple,\n                            removeIcon: \"x-circle\",\n                            removableAttr: {\n                                unselectable: \"on\",\n                                \"aria-hidden\": true,\n                                \"aria-label\": dropdowntree.options.messages.deleteTag,\n                                title: dropdowntree.options.messages.deleteTag\n                            }\n                        }));\n            };\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                wrapper = element.parent(\"span.k-dropdowntree\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap('<span class=\"k-dropdowntree k-input\" unselectable=\"on\" />').parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n                wrapper[0].title = element[0].title;\n            }\n\n            dropdowntree.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n        },\n\n        _tagList: function() {\n            var dropdowntree = this._dropdowntree,\n                tagList = dropdowntree.wrapper.children(\"div.k-input-values\");\n\n            if (!tagList[0]) {\n                var isMultiple = dropdowntree.options.tagMode === \"multiple\";\n                var tagCollection = isMultiple ? \"tags\": \"multipleTag\";\n\n                tagList = $(html.renderChipList('<div unselectable=\"on\" class=\"k-input-values\" data-template=\"tagTemplate\" data-bind=\"source: ' + tagCollection + '\" />', $.extend({}, dropdowntree.options))).appendTo(dropdowntree.wrapper);\n            }\n\n            dropdowntree.tagList = tagList;\n            dropdowntree.tagList.attr('id', kendo.guid() + \"_tagList\");\n            dropdowntree.wrapper.attr(\"aria-owns\", dropdowntree.tagList.attr('id'));\n            var viewModel = kendo.observable({\n                multipleTag: dropdowntree._multipleTags,\n                tags: dropdowntree._tags,\n                tagTemplate: dropdowntree.valueTemplate\n            });\n            kendo.bind(dropdowntree.tagList, viewModel);\n            dropdowntree.tagList.attr(\"data-stop\", true);\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var oldValues = dropdowntree._values;\n            if (value === undefined || value === null) {\n                return dropdowntree._values.slice();\n            }\n\n            dropdowntree.setValue(value);\n            dropdowntree._valueMethodCalled = true;\n            if (value.length) {\n                this._removeValues(oldValues, value);\n\n                dropdowntree._checkItemByValue(value);\n            } else {\n                dropdowntree._clearTextAndValue();\n            }\n\n            dropdowntree._valueMethodCalled = false;\n            dropdowntree._toggleCloseVisibility();\n        },\n\n        _removeValues: function(oldValues, value) {\n            var dropdowntree = this._dropdowntree;\n            var removedValues = this._getNewValues(oldValues, value);\n\n            for (var idx = 0; idx < removedValues.length; idx++) {\n                for (var j = 0; j < dropdowntree._tags.length; j++) {\n                    if (dropdowntree._valueComparer(dropdowntree._tags[j],removedValues[idx])){\n                        dropdowntree._uncheckItemByUid(dropdowntree._tags[j].uid);\n                    }\n                }\n            }\n        },\n\n        _getNewValues: function(oldValues, value){\n            var removedValues = [];\n\n            for (var idx = 0; idx < oldValues.length; idx++) {\n                if(value.indexOf(oldValues[idx]) === -1){\n                    removedValues.push(oldValues[idx]);\n                }\n            }\n\n            return removedValues;\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var tagsArray = dropdowntree._tags.slice();\n\n            for (var idx = 0; idx < tagsArray.length; idx++) {\n                var uid = tagsArray[idx].uid;\n                dropdowntree._preventChangeTrigger = true;\n                dropdowntree._uncheckItemByUid(uid);\n            }\n\n            if (tagsArray.length) {\n                dropdowntree._preventChangeTrigger = false;\n                if(!dropdowntree._valueMethodCalled){\n                    dropdowntree.trigger(CHANGE);\n                }\n            }\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (dropdowntree._noInitialValue && tempItem.checked) {\n                dropdowntree._checkValue(tempItem);\n                return;\n            }\n\n            if ((value.length || this._isDataSourceSet) &&\n                (value.indexOf(dropdowntree._currentValue(tempItem)) !== -1 || value.indexOf(tempItem)) !== -1 &&\n                !this._findTag(dropdowntree._currentValue(tempItem))) {\n                if (tempItem.checked) {\n                    dropdowntree._checkValue(tempItem);\n                } else {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"checked\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                }\n            }\n        },\n\n        _findTag: function(tempItemValue) {\n            var dropdowntree = this._dropdowntree;\n\n            return dropdowntree._tags.find(function(item) {\n                return dropdowntree._valueComparer(item, tempItemValue);\n            });\n        }\n    });\n\n    kendo.ui.DropDownTree.SingleSelection = SingleSelection;\n    kendo.ui.DropDownTree.MultipleSelection = MultipleSelection;\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","$","window","kendo","jQuery","undefined","ui","keys","DISABLED","SELECT","CHECKED","DATABOUND","CLICK","NS","INDETERMINATE","NAVIGATE","subGroup","TreeView","contentChild","filter","node","result","children","length","Tree","extend","init","element","options","dropdowntree","that","this","_nodesToLoad","fn","call","_isMultipleSelection","wrapper","on","_clickSelectedItem","bind","_checkOnSelect","e","isDefaultPrevented","dataItem","set","checked","_setCheckedValue","value","_click","one","currentTarget","_trigger","defaultrefresh","action","items","parentNode","loadOnDemand","checkChildren","checkboxes","i","_skip","field","level","_updateNodes","findByUid","uid","_progress","bubble","_appendItems","index","_remove","_refreshChildren","_refreshRoot","expanded","hasChildren","load","trigger","attr","find","_treeViewDataBound","sender","updateIndeterminate","_previousVisible","lastChild","prev","root","last","_expanded","parent","checkAll","is","filterInput","_keydown","key","keyCode","target","focused","current","checkbox","first","rtl","support","isRtl","RIGHT","LEFT","_nextVisible","hasClass","expand","collapse","_enabled","DOWN","UP","altKey","HOME","END","ENTER","select","SPACEBAR","prop","data","_checkboxChange","ESC","_closePopup","TAB","preventDefault","close","refresh","skipUpdateOnBind","_checkValue","selected","_selectValue","_dropdowntree","amd","a1","a2","a3","__meta__","id","name","category","description","depends","html","Widget","ObservableArray","ObservableObject","activeElement","_activeElement","ns","HIDDENCLASS","WIDTH","browser","outerWidth","_outerWidth","DOT","READONLY","STATEDISABLED","ARIA_DISABLED","HOVER","FOCUSED","HOVEREVENTS","TABINDEX","OPEN","CLOSE","CHANGE","quotRegExp","CHIP","DropDownTree","_selection","_getSelection","_focusInputHandler","_focusInput","_initial","val","_values","_noInitialValue","_isNullorUndefined","_valueMethodCalled","Array","isArray","slice","_inputTemplate","_accessors","_setTreeViewOptions","_dataSource","_initWrapper","_applyCssClasses","_placeholder","_tabindex","tree","tabIndex","aria-hidden","list","append","_header","_noData","_footer","_reset","_popup","popup","_popupOpen","_clearButton","_filterHeader","_treeview","_renderFooter","_checkAll","_enable","_toggleCloseVisibility","_aria","autoBind","text","_preselect","_textAccessor","placeholder","disabled","parents","enable","notify","treeviewOptions","dataImageUrlField","dataSpriteCssClassField","dataTextField","dataUrlField","size","treeview","template","rootDataSource","dataSource","HierarchicalDataSource","create","wrap","_altname","MultipleSelection","SingleSelection","setDataSource","_isDataSourceSet","_tags","setValue","empty","span","show","_multipleTags","animation","autoClose","autoWidth","clearButton","dataValueField","delay","enabled","enforceMinLength","height","ignoreCase","messages","singleTag","clear","deleteTag","noData","minLength","noDataTemplate","checkAllTemplate","tagMode","valuePrimitive","footerTemplate","headerTemplate","valueTemplate","filterLabel","fillMode","rounded","events","focus","readonly","_editable","disable","toggle","open","_toggle","_isFilterEnabled","_search","fetch","visible","_allowOpening","addClass","_hovered","search","word","clearTimeout","_typingTimeout","_getFilter","_filtering","operator","flatView","_renderNoData","setOptions","css","destroy","off","_clear","tagList","unbind","_form","_resetHandler","_filter","_setValue","loweredText","toLowerCase","_selectItemByText","input","aria-haspopup","aria-expanded","aria-owns","role","_activeId","guid","_ariaLabel","aria-multiselectable","aria-describedby","header","_angularElement","remove","prepend","angular","elements","appendTo","instance","footer","_adjustListWidth","width","style","computedStyle","computedWidth","getComputedStyle","parseFloat","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","minWidth","whiteSpace","formId","form","closest","setTimeout","Popup","anchor","_openHandler","_closeHandler","autosize","toggleClass","trim","aria-selected","removeAttr","_currentValue","currentValue","_value","indexOfValue","isMultiple","_level","indexOf","alreadyAddedTag","grep","item","_tagUid","itemToAdd","toJSON","push","hide","itemToRemove","idx","splice","_treeViewCheckAllCheck","_preventChangeTrigger","position","_updateSelectedOptions","tagName","selectedItems","_option","_text","dataValue","dataText","option","replace","htmlEncode","_accessor","_clearClick","stopPropagation","_clearTextAndValue","_clearInput","_clearText","_clearValue","useWithBlock","_assignInstance","assign","split","removeClass","isPlainObject","getElements","get","getter","textField","valueField","getterFunction","count","levels","map","x","d","Math","min","_accessorInput","clearTitle","insertAfter","isReadOnly","hasValue","valueDoesNotEqualPlaceHolder","_showClear","_hideClear","_prev","_deselectItem","rootItems","_checkLoadedItems","rootItem","subItems","_valueComparer","_checkLoadedItem","_getAllChecked","_checkCheckAll","_uncheckCheckAll","checkAllCheckbox","_allItemsAreChecked","_allItemsAreUnchecked","filterTemplate","_disableCheckChildren","title","aria-autocomplete","_filterChange","insertBefore","renderCheckBox","label","_changeCheckAll","_keydownCheckAll","_disabledCheckedItems","_disabledUnCheckedItems","isChecked","_updateCheckAll","_toggleCheckAllItems","edge","_clickCheckAll","_dfs","_traverceChildren","_uncheckItemByUid","_uncheckItemEqualsUid","_itemEqualsText","_selectItemByValue","_itemEqualsValue","_checkItemByValue","dataItems","_checkItemEqualsValue","itemValue","itemText","newValue","_allCheckedItems","_getAllCheckedItems","childrenField","_childrenOptions","schema","_checkAllCheckItem","add","dropDownWrapper","_toggleHover","_focusinHandler","_focusoutHandler","_wrapperClick","_removeTagClick","_prevent","_focused","type","preventScroll","_ie11PreventScrollOnFocus","version","_toggleResize","isFilterInputActive","isWrapperActive","tagItem","isPopupVisible","_focusPrevTag","_focusNextTag","_focusFirstTag","_focusLastTag","DELETE","_removeTag","BACKSPACE","_clearFilter","activedescendant","next","_clearDisabledTag","firstTag","lastTag","fields","lastIndex","plugin","cssProperties","registerPrefix","registerValues","values","roundedValues","concat","Class","view","_wrapper","_span","DOMelement","cssText","className","accesskey","unselectable","SELECTOR","renderButton","icon","shape","_arrow","_arrowIcon","selectedNode","tempItem","_tagTemplate","_tagList","valueToSelect","tagTemplate","renderChip","themeColor","removable","removeIcon","removableAttr","aria-label","tagCollection","renderChipList","viewModel","observable","multipleTag","tags","oldValues","_removeValues","removedValues","_getNewValues","j","tagsArray","_findTag","tempItemValue"],"mappings":"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"}